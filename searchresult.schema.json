{
    "type":"object",
    "properties":{
        "total":{
            "type":"integer"
        },
        "libs":{
            "$ref":"#/$defs/facet"
        },
        "params":{
            "$ref":"#/$defs/facet"
        },
        "returns":{
            "$ref":"#/$defs/facet"
        },
        "tags":{
            "$ref":"#/$defs/facet"
        },
        "parameterized":{
            "$ref":"#/$defs/facet"
        },
        "items":{
            "type":"array",
            "items":{
                "$ref":"#/$defs/search-item"
            }
        }
    },
    "$defs":{
        "facet":{
            "type":"array",
            "items":{
                "$ref":"#/$defs/facet-value"
            }
        },
        "facet-value":{
            "type":"object",
            "properties":{
                "value":{
                    "type":"string"
                },
                "count":{
                    "type":"integer"
                }
            }
        },
        "param":{
            "type":"object",
            "properties":{
                "name":{
                    "type":"string"
                },
                "types":{
                    "type":"array",
                    "items":{
                        "type":"string"
                    }
                }
            }
        },
        "return":{
            "type":"object",
            "properties":{
                "kind":{
                    "type":"string",
                    "pattern":"^(or)|(values)|(return)$"
                },
                "items":{
                    "type":"array",
                    "items":{
                        "$ref":"#/$defs/return"
                    }
                },
                "type":{
                    "type":"string"
                }
            }
        },
        "func-signature":{
            "type":"object",
            "properties":{
                "type":{
                    "type":"string",
                    "pattern":"^function$"
                },
                "variants":{
                    "type":"array",
                    "items":{
                        "type":"object",
                        "properties":{
                            "params":{
                                "type":"array",
                                "items":{
                                    "$ref":"#/$defs/param"
                                }
                            },
                            "return":{
                                "$ref":"#/$defs/return"
                            }
                        }
                    }
                }
            }
        },
        "syntax-signature":{
            "type":"object",
            "properties":{
                "type":{
                    "type":"string",
                    "pattern":"^syntax$"
                },
                "literals":{
                    "type":"array",
                    "items":{
                        "type":"string"
                    }
                },
                "patterns":{
                    "type":"array",
                    "items":{
                        "type":"object",
                        "properties":{
                            "pattern":{
                                "type":"string"
                            },
                            "type":{
                                "oneOf":[
                                    {"$ref":"#/$defs/return"},
                                    {"type": "null"}
                                ]
                            }
                        }
                    }
                }
            }
        },
        "value-signature":{
            "type":"object",
            "properties":{
                "type":{
                    "type":"string",
                    "pattern":"^value$"
                },
                "value":{
                    "$ref":"#/$defs/return"
                }
            }
        },
        "pattern-signature":{
            "type":"object",
            "properties":{
                "type":{
                    "type":"string",
                    "pattern":"^pattern$"
                },
                "patterns":{
                    "type":"array",
                    "items":{
                        "type":"string"
                    }
                }
            }
        },
        "alist-signature":{
            "type":"object",
            "properties":{
                "type":{
                    "type":"string",
                    "pattern":"^alist$"
                },
                "car":{
                    "$ref":"#/$defs/param"
                },
                "cdr":{
                    "$ref":"#/$defs/param"
                }
            }
        },
        "list-signature":{
            "type":"object",
            "properties":{
                "type":{
                    "type":"string",
                    "pattern":"^list$"
                },
                "element":{
                    "$ref":"#/$defs/param"
                }
            }
        },
        "vector-signature":{
            "type":"object",
            "properties":{
                "type":{
                    "type":"string",
                    "pattern":"^vector$"
                },
                "element":{
                    "$ref":"#/$defs/param"
                }
            }
        },
        "signature": {
            "oneOf": [{
                "$ref":"#/$defs/func-signature"
            },{
                "$ref":"#/$defs/syntax-signature"
            },{
                "$ref":"#/$defs/value-signature"
            }, {
                "$ref":"#/$defs/pattern-signature"
            }, {
                "$ref":"#/$defs/alist-signature"
            }, {
                "$ref":"#/$defs/list-signature"
            }, {
                "$ref":"#/$defs/vector-signature"
            }]
        },
        "search-item": {
            "oneOf": [{
                "$ref":"#/$defs/search-item-single"
            },{
                "$ref":"#/$defs/search-item-group"
            }]
        },
        "search-item-group":{
            "type":"object",
            "properties":{
                "kind":{
                    "type":"string",
                    "pattern":"^group$"
                },
                "lib":{
                    "type":"string"
                },
                "entries": {
                    "type": "array",
                    "items": {
                        "$ref":"#/$defs/search-item-single"
                    }
                },
                "description":{
                    "type":"string"
                }
            },
            "required": ["kind", "lib", "entries", "description"]
        },
        "search-item-single":{
            "type":"object",
            "properties":{
                "kind":{
                    "type":"string",
                    "pattern":"^single$"
                },
                "lib":{
                    "type":"string"
                },
                "name":{
                    "type":"string"
                },
                "description":{
                    "type":"string"
                },
                "signature": {
                    "$ref":"#/$defs/signature"
                },
                "subsignatures":{
                    "type":"array",
                    "items":{
                        "type":"object",
                        "properties":{
                            "name":{
                                "type":"string"
                            },
                            "signature":{
                                "$ref":"#/$defs/signature"
                            }
                        }
                    }
                },
                "tags":{
                    "type":"array",
                    "items":{
                        "type":"string"
                    }
                }
            },
            "required": ["kind", "lib", "name", "description", "signature", "subsignatures", "tags"]
        }
    }
}
